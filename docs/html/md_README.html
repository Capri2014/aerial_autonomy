<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.6"/>
<title>ASCO Aerial Autonomy: ASCO Aerial Autonomy</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="code.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">ASCO Aerial Autonomy
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.6 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(10)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(11)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">ASCO Aerial Autonomy </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><h2>Introduction</h2>
<p>The doxygen documentation to the project can be found <a href="https://jhu-asco.github.io/aerial_autonomy/">here</a>.</p>
<h2>Setup</h2>
<p>Run the setup script in scripts/setup/setup.sh to configure Git hooks.</p>
<p>Install the following dependencies (lcov, protobuf, doxygen, doxypy, coverxygen, google-glog, class-loader). On Ubuntu 14.04 run the following line in a terminal </p>
<pre class="fragment">sudo apt-get install lcov protobuf-compiler libprotobuf-dev doxygen doxypy libgoogle-glog-dev ros-indigo-class-loader
sudo pip install coverxygen
</pre><p>Install protobuf 3.1: </p>
<pre class="fragment">git clone https://github.com/google/protobuf.git
cd protobuf
git checkout v3.1.0
./autogen.sh
./configure
make
sudo make install
sudo ldconfig
</pre><h2>Running Executables</h2>
<p>The package provides a <code>uav_system_node</code> executable which loads a state machine and hardware and waits for event commands from a ROS topic. The <code>rqt_aerial_autonomy_gui</code> script provides a GUI to generate events for the state machine. The rqt plugin can be loaded along with <code>rqt_rviz</code> in the <code>rqt_gui</code> framework.</p>
<p>The <code>simulator.launch</code> file in the launch folder executes the state machine node using simulated hardware. The GUI can be launched individually using rosrun. The steps to launch a simulated quadrotor with the state machine are </p>
<pre class="fragment">roslaunch aerial_autonomy simulator.launch
rosrun aerial_autonomy rqt_aerial_autonomy_gui  # In a separate tab
</pre><h2>Running Tests</h2>
<p>To build and run tests use <code>catkin build <a class="el" href="namespaceaerial__autonomy.html" title="GUI source code to provide user the ability to trigger events from GUI to state machine. ">aerial_autonomy</a> --catkin-make-args run_tests</code>. Output of individual tests can be checked using <code>rosrun <a class="el" href="namespaceaerial__autonomy.html" title="GUI source code to provide user the ability to trigger events from GUI to state machine. ">aerial_autonomy</a> test_name</code>. To see all test outputs run <code>catkin run_tests --this</code>.</p>
<h2>Logging</h2>
<p>GLOG is used to log messages from the state machine. The messages are divided into different levels (INFO, WARNING, ERROR, etc.,). The information messages are divided into different verbosity levels (0,1,2 and so on). The verbosity level can be adjusted using the environment variable <code>GLOG_v</code>. If the environment variable is set to 1 (<code>export GLOG_v=1</code>), then all the messages with verbosity 0 and 1 are streamed to stderr output.</p>
<p>The log messages are also recorded into log files in the <code>logs</code> folder. The symbolic links <code>uav_system_node.INFO</code> and <code>uav_system_node.WARNING</code> in the log folder point to the latest log files. The log directory can be changed using the <code>GLOG_log_dir</code> environment variable. More information about the log files can be found in the Google Log <a href="http://rpg.ifi.uzh.ch/docs/glog.html">documentation</a>.</p>
<p>The <code>simulator</code> launch file introduced above allows for specifying the log level and log directory using roslaunch arguments <code>log_level</code> and <code>log_dir</code> respectively. For example </p>
<pre class="fragment">roslaunch aerial_autonomy simulator.launch log_level:=1  # Prints all the verbose log messages with priority 0 and 1.
</pre><h2>Style</h2>
<p>This repository uses clang-format for style checking. Pre-commit hooks ensure that all staged files conform to the style conventions. To skip pre-commit hooks and force a commit, use <code>git commit -n</code>.</p>
<h2>Documentation Coverage</h2>
<p>We use coverxygen to generate documentation coverage for the doc: <a href="https://github.com/psycofdj/coverxygen">https://github.com/psycofdj/coverxygen</a></p>
<p>Use the script <code>scripts/generate_documentation_coverage.bash</code> to generate documentation into <code>documentation_coverage_info</code> folder. Check the html page in <code>documentation_coverage_info/index.html</code> to verify the documentation coverage of the code.</p>
<p>Documentation coverage is also added as a <code>pre-push</code> hook. This verifies that 95% of the code is covered with documentation before pushing to remote. It can be skipped for branches with their name starting with <code>develop*</code> and also by using <code>git push --no-verify</code> command.</p>
<h2>Test Coverage</h2>
<p>We use <code>lcov</code> to generate the test coverage report into the <code>test_coverage_info</code> folder. The script <code>scripts/generate_test_coverage.bash</code> is used to run tests in the project and generate test coverage report into <code>test_coverage_info</code> folder. The script is generated using CMake. Run <code>catkin build <a class="el" href="namespaceaerial__autonomy.html" title="GUI source code to provide user the ability to trigger events from GUI to state machine. ">aerial_autonomy</a></code> to create the script. Check the html page <code>test_coverage_info/index.html</code> to check the line and function coverage. The bash script is generated by running CMake using <code>catkin build <a class="el" href="namespaceaerial__autonomy.html" title="GUI source code to provide user the ability to trigger events from GUI to state machine. ">aerial_autonomy</a></code>.</p>
<p>The test generation is integrated into the <code>pre-push</code> commit hook. This runs the above test coverage generation script and verifies that the coverage level is above 95% threshold. This can be skipped by either naming the branch as <code>develop[your_branch_name]</code> or using <code>git push --no-verify</code>.</p>
<h2>Uploading documentation</h2>
<p>The documentation is uploaded through <code>gh-pages</code> branch. The docs are created in master and passed to the <code>gh-pages</code> branch using <code>scripts/applydocs.bash</code> script. The script checks that there are not uncommited changes before uploading documentation to avoid issues with git. The script also requires that you explicitly link gh-pages branch to the remote using <code>git branch --set-upstream-to=[GH_PAGES_REMOTE]</code> </p>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.6-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated for ASCO Aerial Autonomy &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.6
</small></address>
</body>
</html>
