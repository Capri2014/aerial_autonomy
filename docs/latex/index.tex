\section*{Background}

\subsection*{Goal}

Easily create autonomy applications by combining modular state behaviors into domain-\/specific state machines. Use generic interfaces for quadcopter and manipulator hardware which allow users to adapt existing hardware drivers to the framework.

\section*{Project}

The goal of the project is to create a generic state machine interface for the quadrotor and arm to do different tasks such as “pick and place”, “screwing a lightbulb”, “\-A\-R manipulation”, etc. This requires different types of controllers, estimators and state logic based on the task at hand. The framework consists of the following main components\-:


\begin{DoxyEnumerate}
\item Robot System
\begin{DoxyEnumerate}
\item Controllers
\item Hardware Plugins
\item Estimators
\item Controller\-Hardware\-Interfaces
\end{DoxyEnumerate}
\item \hyperlink{classLogicStateMachineFrontEnd}{Logic\-State\-Machine\-Front\-End}
\item \hyperlink{classStateMachineGUIConnector}{State\-Machine\-G\-U\-I\-Connector}
\item G\-U\-I\-Front\-End
\item \hyperlink{classOnboardSystemHandler}{Onboard\-System\-Handler}
\end{DoxyEnumerate}

\section*{Components}

\subsection*{Robot System}

The robot system owns privately the hardware, controllers, estimators and controller-\/hardware interfaces. For the public interface it provides methods to retrieve sensor/estimator data, and select and set controller goals for the robot.

\begin{TabularC}{3}
\hline
\rowcolor{lightgray}{\bf Component }&{\bf Description }&{\bf Link  }\\\cline{1-3}
Hardware &Send commands to hardware and retrieve raw sensor data &\hyperlink{classUAVSystem}{U\-A\-V\-System} \\\cline{1-3}
Controllers &Provide run function that returns the controls to send back to hardware based on sensor data &\hyperlink{classBuiltInController}{Built\-In\-Controller} \\\cline{1-3}
Estimators &Compute the robot state/parameters based on raw sensor data &None \\\cline{1-3}
Controller-\/\-Hardware Interfaces &For a single controller, extracts sensor/estimator data from hardware, passes it to the controller run function, and sends the resulting control commands to hardware &\hyperlink{classControllerHardwareConnector}{Controller\-Hardware\-Connector} \\\cline{1-3}
\end{TabularC}
\subsection*{Logic State Machine (\hyperlink{classLogicStateMachineFrontEnd}{Logic\-State\-Machine\-Front\-End})}

The Logic State Machine (L\-S\-M) contains the behavior necessary to achieve a desired task. Each state in a logic state machine contains a {\ttfamily run} function that executes state-\/specific behaviors and triggers appropriate state transitions. The L\-S\-M behavior is executed at a user-\/defined frequency



The L\-S\-M also provides a sub state machine for checking the health of the hardware based on sensor data, and health reported by the hardware plugins. The state of this submachine is used to guard the transitions between different states. For example, if the quadrotor has a low battery warning, the quadrotor will not accept a goal command to fly to a goal far away. If the battery level is critical, the health sub machine may trigger a land event automatically.

\subsection*{\hyperlink{classStateMachineGUIConnector}{State\-Machine\-G\-U\-I\-Connector}}

The \hyperlink{classStateMachineGUIConnector}{State\-Machine\-G\-U\-I\-Connector} connects the G\-U\-I interface to the state machine. It provides a message based interface for triggering manual state transitions through the G\-U\-I. These actions can be very generic -\/ such as buttons for “start mission” and “start tracking” -\/ and can be specific such as “land”.

\subsection*{G\-U\-I\-Front\-End (\hyperlink{classaerial__autonomy_1_1aerial__autonomy__gui_1_1EventTransmissionGUI}{aerial\-\_\-autonomy.\-aerial\-\_\-autonomy\-\_\-gui.\-Event\-Transmission\-G\-U\-I})}

The G\-U\-I contains a text box that updates the status of all the hardware plugins and the state machine. The status of the hardware plugins include the health information of the hardware and the state of the hardware in the world. The state machine status includes information about the current state and any events that are not accepted by the state machine. In addition, the G\-U\-I should be able to send manual triggers to the state machine that are generated by the user. Here is an example G\-U\-I Front\-End\-:

\begin{DoxyRefDesc}{Todo}
\item[\hyperlink{todo__todo000014}{Todo}]Add picture of latest G\-U\-I with quad status etc\end{DoxyRefDesc}


The Triggers should be connected to the {\ttfamily State\-Machine} using {\ttfamily \hyperlink{classStateMachineGUIConnector}{State\-Machine\-G\-U\-I\-Connector}} class. The triggers are events without any information. There can also be commands with information using {\ttfamily Rviz} goalpose callbacks to send the drone to a specific location.

\subsection*{Classes segregated into groups}

The classes created in this project can be found \hyperlink{md_markdown_scripts_class_groups}{here}

\subsection*{Additional Resources}


\begin{DoxyItemize}
\item \hyperlink{md_markdown_scripts_creating_state_machine}{Creating a State Machine}
\item \hyperlink{md_markdown_scripts_class_groups}{Classes by group} 
\end{DoxyItemize}